<%- include('partials/header') %>

<%- include('partials/nav-panel') %>

<div id="main" class="main">
    <div class="page-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-receipt-cutoff" viewBox="0 0 16 16">
            <path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zM11.5 4a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"/>
            <path d="M2.354.646a.5.5 0 0 0-.801.13l-.5 1A.5.5 0 0 0 1 2v13H.5a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H15V2a.5.5 0 0 0-.053-.224l-.5-1a.5.5 0 0 0-.8-.13L13 1.293l-.646-.647a.5.5 0 0 0-.708 0L11 1.293l-.646-.647a.5.5 0 0 0-.708 0L9 1.293 8.354.646a.5.5 0 0 0-.708 0L7 1.293 6.354.646a.5.5 0 0 0-.708 0L5 1.293 4.354.646a.5.5 0 0 0-.708 0L3 1.293 2.354.646zm-.217 1.198.51.51a.5.5 0 0 0 .707 0L4 1.707l.646.647a.5.5 0 0 0 .708 0L6 1.707l.646.647a.5.5 0 0 0 .708 0L8 1.707l.646.647a.5.5 0 0 0 .708 0L10 1.707l.646.647a.5.5 0 0 0 .708 0L12 1.707l.646.647a.5.5 0 0 0 .708 0l.509-.51.137.274V15H2V2.118l.137-.274z"/>
        </svg>
        Purchasing
    </div>
    <div class="report-frame">
        <div class="purchasing-card">
            <div class="purchasing-report">
                <div class="purchasing-table">
                    <div class="report-header">
                        <form action="/purchasing/search-PO" method="post" autocomplete="off">
                            <div class="flex-container flex-row flex-between">
                                <div class="search-frame">
                                    <% if (showAll) { %>
                                        <input type="text" name="searchValue" id="searchValue" class="form-control input-md" value="<%= searchValue %>" placeholder="PO#">
                                        <a class="search-button" href="/purchasing">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                            </svg>
                                            Reset
                                        </a>
                                    <% } else { %>
                                        <input type="text" name="searchValue" id="searchValue" class="form-control input-md" placeholder="PO#">
                                        <button class="search-button">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                            </svg>
                                            Search
                                        </button>
                                    <% } %>
                                </div>
                                <div class="search-frame">
                                    <a class="search-button" href="/purchasing/orders=Open">Open Orders</a>
                                    <a class="search-button" href="/purchasing/orders=Closed">Closed Orders</a>
                                    <a class="search-button" href="/purchasing/orders=All">All Orders</a>
                                </div>
                            </div>
                        </form>
                    </div>
                    <table class="table table-secondary table-striped table-hover table-bordered">
                        <thead>
                            <tr class="align-center">
                                <th scope="col" class="table-options">#</th>
                                <th scope="col" class="table-options-checkbox">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    </div>
                                </th>
                                <th scope="col" class="table-column-small">Date</th>
                                <th scope="col">PO#</th>
                                <th scope="col">Vendor</th>
                                <th scope="col" class="table-column-small">Invoice Total</th>
                                <th scope="col" class="table-column-small">Status</th>
                                <th scope="col" colspan="2" class="table-options">Options</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% purchaseOrders.forEach((purchaseOrder, index) => { %>
                            <tr class="align-center">
                                <td><%= index + 1 %></td>
                                <td class="table-options-checkbox align-center">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    </div>
                                </td>
                                <td><%= purchaseOrder.date %></td>
                                <td><%= purchaseOrder.purchaseOrderNumber %></td>
                                <td class="align-left"><%= purchaseOrder.vendor.company %></td>
                                <% if (purchaseOrder.invoiceTotal === '') { %>
                                    <td class="align-center">-</td>
                                <% } else { %>
                                    <td class="align-right"><%= purchaseOrder.invoiceTotal %></td>
                                <% } %>
                                <td class="align-center"><%= purchaseOrder.orderStatus %></td>
                                <td class="table-options align-middle">                        
                                    <a class="table-delete-sm" href="/purchasing/view-po-id=<%= purchaseOrder._id %>">              
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                    </svg>
                                    </a>
                                </td>
                                <td class="table-options">
                                    <a href="#" class="table-delete-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                        </svg>
                                    </a>
                                </td>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                    <% if (pages >= 2) { %>
                        <div class="pagination-panel">
                            <nav aria-label="Page navigation example">
                                <ul class="pagination">
                                    <% if (pageNumber != 1) { %>
                                        <li class="page-item"><a class="page-link" href="?page=<%= Number(pageNumber) - 1%>">Previous</a></li>
                                    <% } %>
                                    <% for (var a = 1; a <= pages; a++) { %>
                                        <li class="page-item"><a class="page-link" href="?page=<%= a; %>"><%= a; %></a></li>
                                    <% } %>
                                    <% if (pageNumber != pages) { %>
                                        <li class="page-item"><a class="page-link" href="?page=<%= Number(pageNumber) + 1%>">Next</a></li>
                                    <% } %>
                                </ul>
                            </nav>
                        </div>
                    <% } %>
                </div>
            </div>
            <div class="purchasing-menu">
                <h2>Purchasing Menu:</h2>
                <a href="/purchasing/new-order" class="purchasing-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5V8z"/>
                    </svg>
                    New Purchase Order
                </a>
                <div class="purchasing-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-columns-reverse" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M0 .5A.5.5 0 0 1 .5 0h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 0 .5Zm4 0a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10A.5.5 0 0 1 4 .5Zm-4 2A.5.5 0 0 1 .5 2h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm-4 2A.5.5 0 0 1 .5 4h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5Zm-4 2A.5.5 0 0 1 .5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm-4 2A.5.5 0 0 1 .5 8h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10a.5.5 0 0 1-.5-.5Zm-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm-4 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm4 0a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5Z"/>
                    </svg>
                    Reports
                </div>
            </div>   
        </div>
    </div>
</div>

<%- include('partials/footer') %>